(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{22:function(e,t,s){"use strict";s.r(t);var n=s(0),r=s.n(n);s(5);function a(e,t,s,n,r,a,c){try{var i=e[a](c),o=i.value}catch(e){return void s(e)}i.done?t(o):Promise.resolve(o).then(n,r)}function c(e){return function(){var t=this,s=arguments;return new Promise(function(n,r){var c=e.apply(t,s);function i(e){a(c,n,r,i,o,"next",e)}function o(e){a(c,n,r,i,o,"throw",e)}i(void 0)})}}var i={layout:"backend",created:function(){var e=c(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.$store.commit("loading/SET_LOADING",!0),e.next=4,this.$store.dispatch("newsletters/fetchNewsletters");case 4:this.$store.commit("loading/SET_LOADING",!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error: ",e.t0),this.$store.commit("loading/SET_LOADING",!1);case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),data:function(){return{sortBy:"id",sortDesc:!0,fields:[{key:"id",label:"ID",sortable:!0},{key:"selected",label:"Sélectionné?",sortable:!0},{key:"email",label:"E-mail",sortable:!0},{key:"is_active",label:"Est actif?",sortable:!0},{key:"emails_sent",label:"Nb. d'e-mails envoyés",sortable:!0},{key:"updated_at",label:"Dernière modification",sortable:!0},{key:"actions",sortable:!1}],items:[{isActive:!0,age:40,first_name:"Dickerson",last_name:"Macdonald"},{isActive:!1,age:21,first_name:"Larsen",last_name:"Shaw"},{isActive:!1,age:89,first_name:"Geneva",last_name:"Wilson"},{isActive:!0,age:38,first_name:"Jami",last_name:"Carney"}],selected:[]}},computed:{loading:function(){return this.$store.getters["loading/loading"]},newsletters:function(){return Object.values(this.$store.getters["newsletters/newsletters"])}},methods:{onRowSelected:function(e){this.selected=e},selectAllRows:function(){this.$refs.selectableTable.selectAllRows()},clearSelected:function(){this.$refs.selectableTable.clearSelected()},deleteActivity:function(){var e=c(r.a.mark(function e(t){var s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$bvModal.msgBoxConfirm("Etes-vous sûr de vouloir supprimer l'activité ".concat(t,"?"),{okTitle:"Oui",cancelTitle:"Annuler"});case 3:if(s=e.sent,console.log("value: ",s),!s){e.next=9;break}return e.next=8,this.$store.dispatch("activities/deleteActivity",{activityId:t});case 8:this.$noty.success("Activité supprimée avec succès!");case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("error: ",e.t0),this.$noty.error("Une erreur est survenue et l'activité n'a pas pu être supprimée.");case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t){return e.apply(this,arguments)}}()}},o=s(2),l=Object(o.a)(i,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",[s("b-breadcrumb",[s("b-breadcrumb-item",{attrs:{active:""}},[s("font-awesome-icon",{attrs:{icon:"envelope"}}),e._v(" Newsletters")],1)],1),e._v(" "),s("h2",{staticClass:"text-center"},[e._v("Newsletters")]),e._v(" "),s("b-table",{ref:"selectableTable",attrs:{selectable:"","select-mode":"multi",items:e.newsletters,fields:e.fields,responsive:"sm","sort-by":e.sortBy,"sort-desc":e.sortDesc},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"row-selected":e.onRowSelected},scopedSlots:e._u([{key:"cell(selected)",fn:function(t){return[t.rowSelected?[s("span",{attrs:{"aria-hidden":"true"}},[e._v("✓")]),e._v(" "),s("span",{staticClass:"sr-only"},[e._v("Selected")])]:[s("span",{attrs:{"aria-hidden":"true"}},[e._v(" ")]),e._v(" "),s("span",{staticClass:"sr-only"},[e._v("Not selected")])]]}},{key:"cell(is_active)",fn:function(t){return[t.item.is_active?s("span",{staticClass:"text-success"},[e._v("\n                Oui\n            ")]):s("span",{staticClass:"text-danger"},[e._v("\n                Non\n            ")])]}},{key:"cell(updated_at)",fn:function(t){return[e._v("\n            "+e._s(e._f("moment")(t.item.updated_at,"from","now"))+"\n        ")]}}])}),e._v(" "),s("p",[s("b-button",{attrs:{size:"sm"},on:{click:e.selectAllRows}},[e._v("Tout sélectionner")]),e._v(" "),s("b-button",{attrs:{size:"sm"},on:{click:e.clearSelected}},[e._v("Tout désélectionner")])],1),e._v(" "),s("p",[e._v("\n        Selected Rows:"),s("br"),e._v("\n        "+e._s(e.selected)+"\n    ")])],1)},[],!1,null,"158c8fc8",null);t.default=l.exports}}]);