(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{29:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return i});var o=function(){return"undefined"!=typeof window?window:t},i=function(){var t=o();return t&&t.tinymce?t.tinymce:null}}).call(this,n(12))},49:function(t,e,n){"use strict";var o=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],i=function(t){return-1!==o.indexOf(t)},r=function(t,e,n){var o=e.$props.value?e.$props.value:"",r=e.$props.initialValue?e.$props.initialValue:"";n.setContent(o||r),e.$listeners.input&&function(t,e){var n,o=t.$props.modelEvents?t.$props.modelEvents:null,i=Array.isArray(o)?o.join(" "):o;t.$watch("value",function(t,o){e&&"string"==typeof t&&t!==n&&t!==o&&(e.setContent(t),n=t)}),e.on(i||"change keyup undo redo",function(){n=e.getContent(),t.$emit("input",n)})}(e,n),function(t,e,n){Object.keys(e).filter(i).forEach(function(o){var i=e[o];"function"==typeof i&&("onInit"===o?i(t,n):n.on(o.substring(2),function(t){return i(t,n)}))})}(t,e.$listeners,n)},s=0,a=function(t){var e=Date.now();return t+"_"+Math.floor(1e9*Math.random())+ ++s+String(e)},c=function(t){return void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" ")},l=n(29),u={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean},d=function(){return(d=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},p={listeners:[],scriptId:a("tiny-script"),scriptLoaded:!1},m=function(t){return function(){var e,n,o,i=d({},t.$props.init,{readonly:t.$props.disabled,selector:"#"+t.elementId,plugins:(e=t.$props.init&&t.$props.init.plugins,n=t.$props.plugins,c(e).concat(c(n))),toolbar:t.$props.toolbar||t.$props.init&&t.$props.init.toolbar,inline:t.inlineEditor,setup:function(e){t.editor=e,e.on("init",function(n){return r(n,t,e)}),t.$props.init&&"function"==typeof t.$props.init.setup&&t.$props.init.setup(e)}});null!==(o=t.element)&&"textarea"===o.tagName.toLowerCase()&&(t.element.style.visibility=""),Object(l.a)().init(i)}},f={props:u,created:function(){this.elementId=this.$props.id||a("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==Object(l.a)())m(this)();else if(this.element&&this.element.ownerDocument){var t=this.element.ownerDocument,e=this.$props.cloudChannel?this.$props.cloudChannel:"5",n=this.$props.apiKey?this.$props.apiKey:"no-api-key";!function(t,e,n,o){t.scriptLoaded?o():(t.listeners.push(o),e.getElementById(t.scriptId)||function(t,e,n,o){var i=e.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=t,i.addEventListener("load",o),i.src=n,e.head&&e.head.appendChild(i)}(t.scriptId,e,n,function(){t.listeners.forEach(function(t){return t()}),t.scriptLoaded=!0}))}(p,t,"https://cdn.tiny.cloud/1/"+n+"/tinymce/"+e+"/tinymce.min.js",m(this))}},beforeDestroy:function(){null!==Object(l.a)()&&Object(l.a)().remove(this.editor)},render:function(t){return this.inlineEditor?function(t,e,n){return t(n||"div",{attrs:{id:e}})}(t,this.elementId,this.$props.tagName):function(t,e){return t("textarea",{attrs:{id:e},style:{visibility:"hidden"}})}(t,this.elementId)}};e.a=f},96:function(t,e,n){"use strict";n.r(e);var o=n(0),i=n.n(o),r=(n(3),n(49)),s=n(14),a=n.n(s),c=(n(33),n(15)),l=n.n(c),u=n(16),d=n.n(u);n(34);function p(t,e,n,o,i,r,s){try{var a=t[r](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}var m={layout:"backend",components:{"tinymce-editor":r.a,VueCtkDateTimePicker:a.a,"p-check":l.a,Multiselect:d.a},created:function(){this.$store.getters["sponsors/sponsors"].length<1&&this.$store.dispatch("sponsors/fetchSponsors")},mounted:function(){},data:function(){return{tinymce_key:Object({MIX_PUSHER_APP_CLUSTER:"mt1",MIX_PUSHER_APP_KEY:"",NODE_ENV:"production"}).MIX_TINYMCE_KEY,addEndDate:!1,form:{title:"New activity",subtitle:"This is my new activity",content:"<b>Titre</b><p>Hello everyone</p>",start_date:null,end_date:null,sponsors:[]},image:{}}},computed:{sponsors:function(){return this.$store.getters["sponsors/sponsors"]}},methods:{uploadImage:function(t){console.log("uploadImage",t),console.log(t.target),console.log(t.target.files[0]),this.image=t.target.files[0]},createActivity:function(){var t,e=(t=i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(e=new FormData).append("image",this.image),e.append("form",JSON.stringify(this.form)),t.next=6,this.$store.dispatch("activities/createActivity",{formData:e});case 6:this.$noty.success("Activité créée avec succès!"),this.$router.push("/admin/activities"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("error: ",t.t0),this.$noty.error("Une erreur est survenue et l'activité n'a pas pu être créée.");case 14:case"end":return t.stop()}},t,this,[[0,10]])}),function(){var e=this,n=arguments;return new Promise(function(o,i){var r=t.apply(e,n);function s(t){p(r,o,i,s,a,"next",t)}function a(t){p(r,o,i,s,a,"throw",t)}s(void 0)})});return function(){return e.apply(this,arguments)}}()}},f=n(2),v=Object(f.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("b-breadcrumb",[n("b-breadcrumb-item",{staticClass:"navigation",attrs:{to:"/admin/activities"}},[n("font-awesome-icon",{attrs:{icon:"calendar-day"}}),t._v(" "),n("span",[t._v("Activités")])],1),t._v(" "),n("b-breadcrumb-item",{attrs:{active:""}},[t._v("Créer")])],1),t._v(" "),n("h2",{staticClass:"text-center"},[t._v("Créer une nouvelle activité")]),t._v(" "),n("form",{on:{submit:function(e){return e.preventDefault(),t.createActivity(e)}}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"title"}},[t._v("Titre")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{type:"text",id:"title","aria-describedby":"emailHelp",placeholder:""},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"col-12 col-md-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"subtitle"}},[t._v("Sous-titre")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.subtitle,expression:"form.subtitle"}],staticClass:"form-control",attrs:{type:"textarea",id:"subtitle",placeholder:""},domProps:{value:t.form.subtitle},on:{input:function(e){e.target.composing||t.$set(t.form,"subtitle",e.target.value)}}})])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"})]),t._v(" "),n("div",{staticClass:"row my-3"},[n("div",{staticClass:"col-12 col-md-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"image"}},[t._v("Image:")]),n("br"),t._v(" "),n("input",{attrs:{type:"file",id:"image",name:"image",accept:"image/png, image/jpeg"},on:{change:function(e){return t.uploadImage(e)}}})]),t._v(" "),n("div",{staticClass:"custom-file"},[n("label",{staticClass:"custom-file-label",attrs:{for:"new-image"}},[t._v("Image")]),t._v(" "),n("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"new-image",accept:"/image/png, image/jpeg"},on:{change:function(e){return t.uploadImage(e)}}})])])]),t._v(" "),n("div",{staticClass:"row align-items-center"},[n("div",{staticClass:"col-12 col-md-6"},[n("VueCtkDateTimePicker",{attrs:{label:"Choisir date et heure de début",format:"YYYY-MM-DD HH:mm:ss",color:"#9ACD32","button-color":"#9ACD32","button-now-translation":"Maintenant"},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1),t._v(" "),n("div",{staticClass:"col-12 col-md-6"},[n("p-check",{staticClass:"p-curve p-bigger p-jelly",attrs:{name:"check",color:"primary","button-now-translation":"Maintenant"},model:{value:t.addEndDate,callback:function(e){t.addEndDate=e},expression:"addEndDate"}},[t._v("Ajouter une date de fin")])],1),t._v(" "),n("div",{staticClass:"col-12 col-md-6 my-3"},[t.addEndDate?n("VueCtkDateTimePicker",{attrs:{label:"Choisir date et heure de fin",format:"YYYY-MM-DD HH:mm:ss",color:"#9ACD32","button-color":"#9ACD32"},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}}):t._e()],1)]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("multiselect",{attrs:{label:"name","track-by":"id",options:t.sponsors,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"preselect-first":!0,placeholder:"Sélectionner un sponsor",selectLabel:"Appuyer sur Entrée pour sélectionner",selectedLabel:"Sélectionné",deselectLabel:"Appuyer sur entrée pour désélectionner"},model:{value:t.form.sponsors,callback:function(e){t.$set(t.form,"sponsors",e)},expression:"form.sponsors"}})],1)]),t._v(" "),n("div",{staticClass:"row my-4"},[n("div",{staticClass:"col-12 text-center"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Créer cette activité")])])])]),t._v(" "),n("br"),n("br")],1)},[],!1,null,"d7b04366",null);e.default=v.exports}}]);