(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{30:function(t,e,r){"use strict";r.r(e);var n=r(0),i=r.n(n),a=r(5),s=r.n(a),o=r(9);function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var u=function(){var t=!1,e=[];return{resolved:function(){return t},resolve:function(r){if(!t){t=!0;for(var n=0,i=e.length;n<i;n++)e[n](r)}},promise:{then:function(r){t?r():e.push(r)}}}},l=Object.prototype.hasOwnProperty;var d,p=(d=u(),{notify:function(){d.resolve()},wait:function(){return d.promise},render:function(t,e,r){this.wait().then(function(){r(window.grecaptcha.render(t,e))})},reset:function(t){void 0!==t&&(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.reset(t)}))},execute:function(t){void 0!==t&&(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.execute(t)}))},checkRecaptchaLoad:function(){l.call(window,"grecaptcha")&&l.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!d.resolved())throw new Error("ReCAPTCHA has not been loaded")}});function h(t,e,r,n,i,a,s){try{var o=t[a](s),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(n,i)}function f(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function s(t){h(a,n,i,s,o,"next",t)}function o(t){h(a,n,i,s,o,"throw",t)}s(void 0)})}}"undefined"!=typeof window&&(window.vueRecaptchaApiLoaded=p.notify);var m={components:{VueRecaptcha:{name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!1},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},beforeMount:function(){if(this.loadRecaptchaScript&&!document.getElementById(this.recaptchaScriptId)){var t=document.createElement("script");t.id=this.recaptchaScriptId,t.src="https://"+this.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+this.language,t.async=!0,t.defer=!0,document.head.appendChild(t)}},mounted:function(){var t=this;p.checkRecaptchaLoad();var e=c({},this.$props,{callback:this.emitVerify,"expired-callback":this.emitExpired,"error-callback":this.emitError}),r=this.$slots.default?this.$el.children[0]:this.$el;p.render(r,e,function(e){t.$widgetId=e,t.$emit("render",e)})},methods:{reset:function(){p.reset(this.$widgetId)},execute:function(){p.execute(this.$widgetId)},emitVerify:function(t){this.$emit("verify",t)},emitExpired:function(){this.$emit("expired")},emitError:function(){this.$emit("error")}},render:function(t){return t("div",{},this.$slots.default)}}},layout:"frontend",created:function(){var t=f(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("this.$route.path: ",this.$route.path),console.log("this.$route.path.substring(1): ",this.$route.path.substring(1)),this.page){t.next=5;break}return t.next=5,this.$store.dispatch("pages/fetchPageBySlug",{pageSlug:this.$route.path.substring(1)});case 5:if(!(Object.keys(this.$store.getters["activities/activities"]).length<2)){t.next=8;break}return t.next=8,this.$store.dispatch("activities/fetchActivities");case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),data:function(){return{form:new s.a({email:""}),captchaIsVerified:!1}},computed:{loading:function(){return this.$store.getters["loading/loading"]},authUser:function(){return this.$store.getters["auth/user"]},screenWidth:function(){return window.innerWidth},pages:function(){return this.$store.getters["pages/pages"]},page:function(){return Object.values(this.$store.getters["pages/pages"]).find(function(t){return"accueil"===t.slug})},pageSections:function(){return this.page?this.page.sections:[]},currentActivities:function(){return Object.values(this.$store.getters["activities/activities"]).filter(function(t){return 1==t.is_on_frontpage})}},methods:{onCaptchaVerified:function(){console.log("onCaptchaVerified"),this.captchaIsVerified=!0},onCaptchaExpired:function(){console.log("onCaptchaExpired"),this.captchaIsVerified=!1},joinNewsletter:function(){var t=f(i.a.mark(function t(){var e,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.captchaIsVerified){t.next=4;break}return this.$noty.warning('Veuillez cocher la case "Je ne suis pas un robot".'),t.abrupt("return");case 4:return console.log("form: ",this.form),this.$store.commit("loading/SET_LOADING",!0),t.next=8,this.form.submit("post","/api/send-newsletter-form",{transformRequest:[function(t,e){return Object(o.a)(t)}]});case 8:e=t.sent,r=e.data,console.log("data: ",r),this.$store.commit("loading/SET_LOADING",!1),this.$noty.success("Merci pour votre inscription! Vous allez recevoir un e-mail de confirmation."),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),console.log("error: ",t.t0),this.$store.commit("loading/SET_LOADING",!1),this.$noty.error("Une erreur est survenue et votre inscription à la newsletter n'a pas aboutie. Veuillez vérifier les éventuels messages d'erreur.");case 20:case"end":return t.stop()}},t,this,[[0,15]])}));return function(){return t.apply(this,arguments)}}()}},g=(r(333),r(2)),v=Object(g.a)(m,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("b-row",{staticClass:"justify-content-center"},[t.page&&t.page.sections?r("b-col",{staticStyle:{border:"0px solid orange"},attrs:{cols:"12",md:"6",lg:"4",xl:"3"}},t._l(t.page.sections,function(e){return r("b-card",{key:e.id,staticClass:"card mb-3"},[r("b-card-text",{domProps:{innerHTML:t._s(e.content)}})],1)}),1):t._e(),t._v(" "),r("b-col",{staticClass:"p-5",attrs:{cols:"12",md:"6",lg:"8",xl:"9"}},[r("b-row",{staticClass:"justify-content-center"},t._l(t.currentActivities,function(e){return r("b-col",{key:e.id,attrs:{cols:"12",md:"6",lg:"6",xl:"4"}},[r("b-card",{staticStyle:{border:"none"},attrs:{"img-src":"/images/"+e.image,"img-alt":""+e.name,"img-top":""}},[r("b-card-text",{staticClass:"text-center"},[r("h5",{staticClass:"my-2"},[t._v(t._s(e.name))]),t._v(" "),r("b-button",{staticClass:"my-2",attrs:{variant:"primary",size:"sm",to:"/actualites/"+e.slug}},[t._v("En savoir plus →")])],1)],1)],1)}),1)],1)],1),t._v(" "),r("b-row",{staticClass:"justify-content-start"},[r("b-col",{attrs:{cols:"12",md:"12",lg:"4",xl:"4"}},[t.authUser?r("b-card",{staticClass:"card mb-3"},[r("b-card-text",[r("b-form",{on:{submit:function(e){return e.preventDefault(),t.joinNewsletter(e)}}},[r("b-form-group",{attrs:{id:"email",description:"Nous ne partagerons pas votre adresse avec quiconque et ne vous enverront des messages qu'en lien avec nos activités futures."}},[r("label",{attrs:{for:"email"}},[t._v("N'oubliez pas de "),r("b",[t._v("rejoindre notre newsletter")]),t._v(" pour être mis au courant de nos prochaines activités:")]),t._v(" "),r("b-form-input",{class:{"is-invalid":t.form.errors.has("email")},attrs:{id:"email",type:"email",required:"",placeholder:"Entrer votre adresse e-mail"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"email"}})],1),t._v(" "),r("div",{staticClass:"text-center"},[r("vue-recaptcha",{ref:"recaptcha",attrs:{sitekey:"6LcB1dcZAAAAAIzF3xET3bbnJuDpb8nizKpJeA_H",loadRecaptchaScript:!0},on:{verify:t.onCaptchaVerified,expired:t.onCaptchaExpired}}),r("br"),t._v(" "),r("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.loading}},[t.loading?r("b-spinner",{attrs:{small:"",type:"grow"}}):t._e(),t._v("S'inscrire à la newsletter")],1)],1)],1)],1)],1):t._e()],1)],1)],1)},[],!1,null,"a69a8f52",null);e.default=v.exports},333:function(t,e,r){"use strict";var n=r(67);r.n(n).a},334:function(t,e,r){(t.exports=r(6)(!1)).push([t.i,".primary-color[data-v-a69a8f52] {\n  color: #2C5CAD;\n}\n.secondary-color[data-v-a69a8f52] {\n  color: #E1B124;\n}\n.card[data-v-a69a8f52] {\n  border: none;\n  border-radius: 15px;\n  background-color: rgba(255, 255, 255, 0.9);\n}",""])},67:function(t,e,r){var n=r(334);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(7)(n,i);n.locals&&(t.exports=n.locals)}}]);