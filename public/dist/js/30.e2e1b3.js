(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{91:function(t,e,s){"use strict";s.r(e);var o=s(0),r=s.n(o),n=(s(3),s(14)),a=s.n(n),i=(s(33),s(15)),c=s.n(i),l=s(16),p=s.n(l);s(34);function u(t,e,s,o,r,n,a){try{var i=t[n](a),c=i.value}catch(t){return void s(t)}i.done?e(c):Promise.resolve(c).then(o,r)}function v(t){return function(){var e=this,s=arguments;return new Promise(function(o,r){var n=t.apply(e,s);function a(t){u(n,o,r,a,i,"next",t)}function i(t){u(n,o,r,a,i,"throw",t)}a(void 0)})}}var m={layout:"backend",components:{VueCtkDateTimePicker:a.a,"p-check":c.a,Multiselect:p.a},created:function(){var t=v(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$store.getters["activities/activities"].length<1&&this.$store.dispatch("activities/fetchActivities");case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),mounted:function(){var t=v(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=parseInt(this.$route.params.id),console.log("sponsorId: ",e),t.next=4,this.$store.dispatch("sponsors/fetchSponsor",{sponsorId:e});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),data:function(){return{new_image:{}}},computed:{activities:function(){return this.$store.getters["activities/activities"]},sponsors:function(){return this.$store.getters["sponsors/sponsors"]},sponsor:function(){return this.$store.getters["sponsors/sponsor"]}},methods:{uploadImage:function(t){console.log("uploadImage",t),console.log(t.target),console.log(t.target.files[0]),this.new_image=t.target.files[0]},updateSponsor:function(){var t=v(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch("sponsors/updateSponsor",{sponsor:this.sponsor,image:this.new_image});case 3:this.$noty.success("Sponsor mis à jour avec succè!"),this.$router.push("/admin/sponsors"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error: ",t.t0),this.$noty.error("Une erreur est survenue et le sponsor n'a pas pu être mise à jour.");case 11:case"end":return t.stop()}},t,this,[[0,7]])}));return function(){return t.apply(this,arguments)}}()}},d=s(2),f=Object(d.a)(m,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",[s("b-breadcrumb",[s("b-breadcrumb-item",{staticClass:"navigation",attrs:{to:"/admin/sponsors"}},[s("font-awesome-icon",{attrs:{icon:"dollar-sign"}}),t._v(" "),s("span",[t._v("Sponsors")])],1),t._v(" "),s("b-breadcrumb-item",{attrs:{active:""}},[t._v("Montrer")])],1),t._v(" "),t.sponsor?s("form",{on:{submit:function(e){return e.preventDefault(),t.updateSponsor(e)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Nom")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.sponsor.name,expression:"sponsor.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",placeholder:""},domProps:{value:t.sponsor.name},on:{input:function(e){e.target.composing||t.$set(t.sponsor,"name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"contribution"}},[t._v("Contribution")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.sponsor.contribution,expression:"sponsor.contribution"}],staticClass:"form-control",attrs:{type:"textarea",id:"contribution",placeholder:""},domProps:{value:t.sponsor.contribution},on:{input:function(e){e.target.composing||t.$set(t.sponsor,"contribution",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"row my-2"},[s("div",{staticClass:"col-12 col-md-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"image"}},[t._v("Image actuelle:")]),s("br"),t._v(" "),t.sponsor.image?s("img",{attrs:{src:"/images/"+t.sponsors.image,width:"200"}}):s("span",[s("i",[t._v("Pas d'image")])])])]),t._v(" "),s("div",{staticClass:"col-12 col-md-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"image"}},[t._v("Nouvelle image:")]),s("br"),t._v(" "),s("input",{attrs:{type:"file",id:"image",name:"image",accept:"image/png, image/jpeg"},on:{change:function(e){return t.uploadImage(e)}}})])])]),t._v(" "),s("div",{staticClass:"form-group"},[s("VueCtkDateTimePicker",{attrs:{label:"Date de fin de sponsoring","only-date":"",format:"YYYY-MM-DD",formatted:"YYYY-MM-DD",color:"#9ACD32","button-color":"#9ACD32","button-now-translation":"Maintenant"},model:{value:t.sponsor.end_date,callback:function(e){t.$set(t.sponsor,"end_date",e)},expression:"sponsor.end_date"}})],1),t._v(" "),s("div",{staticClass:"row align-items-center my-2"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"image"}},[t._v("Activités pour ce sponsor:")]),s("br"),t._v(" "),s("multiselect",{attrs:{label:"title","track-by":"id",options:t.activities,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"preselect-first":!0,placeholder:"Sélectionner un sponsor",selectLabel:"Appuyer sur Entrée pour sélectionner",selectedLabel:"Sélectionné",deselectLabel:"Appuyer sur entrée pour désélectionner"},model:{value:t.sponsor.activities,callback:function(e){t.$set(t.sponsor,"activities",e)},expression:"sponsor.activities"}})],1)])]),t._v(" "),s("div",{staticClass:"col-12 col-md-6"},[s("p-check",{staticClass:"p-curve p-bigger p-jelly",attrs:{name:"check",color:"primary","button-now-translation":"Maintenant"},model:{value:t.sponsor.is_active,callback:function(e){t.$set(t.sponsor,"is_active",e)},expression:"sponsor.is_active"}},[t._v("Actif ?")])],1),t._v(" "),s("div",{staticClass:"row my-3"},[s("div",{staticClass:"col-12 text-center"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Editer sponsor")])])])]):t._e()],1)},[],!1,null,"d6a7d70c",null);e.default=f.exports}}]);