(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{26:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r.n(n);r(5),r(9);function o(e,t,r,n,s,o,a){try{var i=e[o](a),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,s)}function a(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var a=e.apply(t,r);function i(e){o(a,n,s,i,c,"next",e)}function c(e){o(a,n,s,i,c,"throw",e)}i(void 0)})}}var i={layout:"frontend",created:function(){var e=a(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=a(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("this.$route.path: ",this.$route.path),console.log("this.$route.params: ",this.$route.params),console.log("this.$route.params.email_encoded: ",this.$route.params.email_encoded),this.email_encoded=this.$route.params.email_encoded,e.next=6,this.$store.dispatch("newsletters/fetchNewsletterByEmail",{newsletterEmail:atob(this.$route.params.email_encoded)});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),data:function(){return{email_encoded:""}},computed:{loading:function(){return this.$store.getters["loading/loading"]},authUser:function(){return this.$store.getters["auth/user"]},newsletter:function(){return this.$store.getters["newsletters/newsletter"]}},methods:{unsubscribe:function(){var e=a(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("newsletters/deleteSubscriptionByEmail",{newsletterEncodedEmail:this.$route.params.email_encoded});case 3:this.$noty.success("Votre désinscription a bien été enregistrée."),this.$router.push("/"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error: ",e.t0),this.$noty.error("Le processus de désinscription n'a pas pu aboutir. En cas d'erreurs récurrentes, veuillez nous contacter via le formulaire de contact.");case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()}},c=(r(340),r(2)),u=Object(c.a)(i,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("h1",{staticClass:"text-center mb-5"},[e._v("Se désinscrire à la newsletter")]),e._v(" "),r("b-row",{staticClass:"justify-content-center"},[r("b-col",{attrs:{cols:"12",md:"6"}},[r("b-card",[r("b-card-text",{},[r("p",[e._v("\n                        Votre email: "),r("b",[e._v(e._s(e.newsletter.email))]),r("br"),e._v("\n                        Inscrit le: "),r("b",[e._v(e._s(e._f("moment")(e.newsletter.created_at,"DD MMMM YYYY")))]),r("br"),e._v(" "),e.newsletter.last_sent_email?r("span",[e._v("Dernier envoi le: "),r("b",[e._v(e._s(e._f("moment")(e.newsletter.last_sent_email,"DD MMMM YYYY")))])]):e._e(),r("br")]),e._v(" "),r("p",[e._v("Cliquez sur le bouton pour confirmer que vous ne souhaitez plus recevoir notre newsletter.")]),e._v(" "),r("div",{staticClass:"text-center"},[r("b-button",{on:{click:e.unsubscribe}},[e._v("Me désabonner")])],1)])],1)],1)],1)],1)},[],!1,null,"05a12362",null);t.default=u.exports},340:function(e,t,r){"use strict";var n=r(69);r.n(n).a},341:function(e,t,r){(e.exports=r(6)(!1)).push([e.i,".primary-color[data-v-05a12362] {\n  color: #2C5CAD;\n}\n.secondary-color[data-v-05a12362] {\n  color: #E1B124;\n}",""])},69:function(e,t,r){var n=r(341);"string"==typeof n&&(n=[[e.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};r(7)(n,s);n.locals&&(e.exports=n.locals)}}]);