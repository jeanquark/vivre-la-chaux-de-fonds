(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{250:function(n,t,a){"use strict";var r=a(36);a.n(r).a},251:function(n,t,a){(n.exports=a(8)(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* ANIMATIONS */\n.fadeInDown[data-v-941691a0] {\n  -webkit-animation-name: fadeInDown-data-v-941691a0;\n  animation-name: fadeInDown-data-v-941691a0;\n  -webkit-animation-duration: 1s;\n  animation-duration: 1s;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n}\n@-webkit-keyframes fadeInDown-data-v-941691a0 {\n0% {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -100%, 0);\n    transform: translate3d(0, -100%, 0);\n}\n100% {\n    opacity: 1;\n    -webkit-transform: none;\n    transform: none;\n}\n}\n@keyframes fadeInDown-data-v-941691a0 {\n0% {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -100%, 0);\n    transform: translate3d(0, -100%, 0);\n}\n100% {\n    opacity: 1;\n    -webkit-transform: none;\n    transform: none;\n}\n}\n",""])},36:function(n,t,a){var r=a(251);"string"==typeof r&&(r=[[n.i,r,""]]);var e={hmr:!0,transform:void 0,insertInto:void 0};a(9)(r,e);r.locals&&(n.exports=r.locals)},70:function(n,t,a){"use strict";a.r(t);var r=a(0),e=a.n(r),o=a(5),s=a.n(o);function i(n,t,a,r,e,o,s){try{var i=n[o](s),m=i.value}catch(n){return void a(n)}i.done?t(m):Promise.resolve(m).then(r,e)}var m={metaInfo:function(){return{title:"S'enregistrer"}},middleware:"guest",components:{},layout:"frontend",data:function(){return{form:new s.a({firstname:"John",lastname:"Doe",email:"john.doe@example.com",password:"secret",password_confirmation:"secre"}),mustVerifyEmail:!1}},computed:{loading:function(){return this.$store.getters["loading/loading"]}},methods:{register:function(){var n,t=(n=e.a.mark(function n(){var t,a,r,o,s;return e.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,this.$store.commit("loading/SET_LOADING",!0),n.next=4,this.form.post("/api/register");case 4:if(t=n.sent,a=t.data,this.$noty.success("Enregistrement avec succès!"),!a.status){n.next=12;break}this.$store.commit("loading/SET_LOADING",!1),this.mustVerifyEmail=!0,n.next=23;break;case 12:return n.next=14,this.form.post("/api/login");case 14:return r=n.sent,o=r.data.token,this.$store.dispatch("auth/saveToken",{token:o}),n.next=19,this.$store.dispatch("auth/updateUser",{user:a});case 19:return n.next=21,this.$store.dispatch("auth/fetchUser");case 21:this.$store.commit("loading/SET_LOADING",!1),this.$router.push({name:"index"});case 23:n.next=32;break;case 25:n.prev=25,n.t0=n.catch(0),console.log("error: ",n.t0),this.$store.commit("loading/SET_LOADING",!1),this.$noty.error("Une erreur est survenue et l'enregistrement a échoué."),s=n.t0.message,console.log("message: ",s);case 32:case"end":return n.stop()}},n,this,[[0,25]])}),function(){var t=this,a=arguments;return new Promise(function(r,e){var o=n.apply(t,a);function s(n){i(o,r,e,s,m,"next",n)}function m(n){i(o,r,e,s,m,"throw",n)}s(void 0)})});return function(){return t.apply(this,arguments)}}()}},l=(a(250),a(2)),c=Object(l.a)(m,function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("b-container",[a("b-row",{staticClass:"justify-content-center fadeInDown"},[a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-card",{},[a("b-card-body",[a("b-card-title",{staticClass:"text-center mb-4"},[n._v("\n                        S'enregistrer\n                    ")]),n._v(" "),a("b-card-text",[a("b-form",{on:{submit:function(t){return t.preventDefault(),n.register(t)}}},[a("b-row",[a("b-col",{staticClass:"text-right col-form-label",attrs:{cols:"4",md:"4"}},[a("label",[n._v("Prénom")])]),n._v(" "),a("b-col",{attrs:{cols:"8",md:"8"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:n.form.firstname,expression:"form.firstname"}],staticClass:"form-control",class:{"is-invalid":n.form.errors.has("firstname")},attrs:{type:"text",name:"firstname"},domProps:{value:n.form.firstname},on:{input:function(t){t.target.composing||n.$set(n.form,"firstname",t.target.value)}}}),n._v(" "),a("has-error",{attrs:{form:n.form,field:"firstname"}})],1)],1),n._v(" "),a("b-row",[a("b-col",{staticClass:"text-right col-form-label",attrs:{cols:"4",md:"4"}},[a("label",[n._v("Nom")])]),n._v(" "),a("b-col",{attrs:{cols:"8",md:"8"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:n.form.lastname,expression:"form.lastname"}],staticClass:"form-control",class:{"is-invalid":n.form.errors.has("lastname")},attrs:{type:"text",name:"lastname"},domProps:{value:n.form.lastname},on:{input:function(t){t.target.composing||n.$set(n.form,"lastname",t.target.value)}}}),n._v(" "),a("has-error",{attrs:{form:n.form,field:"lastname"}})],1)],1),n._v(" "),a("b-row",[a("b-col",{staticClass:"text-right col-form-label",attrs:{cols:"4",md:"4"}},[a("label",[n._v("E-mail")])]),n._v(" "),a("b-col",{attrs:{cols:"8",md:"8"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:n.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":n.form.errors.has("email")},attrs:{type:"email",name:"email"},domProps:{value:n.form.email},on:{input:function(t){t.target.composing||n.$set(n.form,"email",t.target.value)}}}),n._v(" "),a("has-error",{attrs:{form:n.form,field:"email"}})],1)],1),n._v(" "),a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{staticClass:"text-right col-form-label",attrs:{cols:"6",md:"4"}},[a("label",[n._v("Mot de passe")])]),n._v(" "),a("b-col",{attrs:{cols:"6",md:"8"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:n.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":n.form.errors.has("password")},attrs:{type:"password",name:"password"},domProps:{value:n.form.password},on:{input:function(t){t.target.composing||n.$set(n.form,"password",t.target.value)}}}),n._v(" "),a("has-error",{attrs:{form:n.form,field:"password"}})],1)],1),n._v(" "),a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{staticClass:"text-right col-form-label",attrs:{cols:"6",md:"4"}},[a("label",[n._v("Confirmer mot de passe")])]),n._v(" "),a("b-col",{attrs:{cols:"6",md:"8"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:n.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"form-control",class:{"is-invalid":n.form.errors.has("password_confirmation")},attrs:{type:"password",name:"password_confirmation"},domProps:{value:n.form.password_confirmation},on:{input:function(t){t.target.composing||n.$set(n.form,"password_confirmation",t.target.value)}}}),n._v(" "),a("has-error",{attrs:{form:n.form,field:"password_confirmation"}})],1)],1),n._v(" "),a("b-row",{staticClass:"justify-content-center my-2"},[a("b-button",{attrs:{type:"submit",variant:"primary",disabled:n.loading}},[n.loading?a("b-spinner",{attrs:{small:"",variant:"primary",label:"Spinning"}}):n._e(),n._v("\n                                    S'enregistrer\n                                ")],1)],1),n._v(" "),a("b-row",{staticClass:"justify-content-center my-2"},[a("router-link",{staticClass:"m-2",attrs:{to:{name:"login"}}},[n._v("Aller au login →")])],1)],1)],1)],1)],1)],1)],1)],1)},[],!1,null,"941691a0",null);t.default=c.exports}}]);