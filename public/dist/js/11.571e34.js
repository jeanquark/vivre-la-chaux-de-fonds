(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{13:function(t,n,e){"use strict";var a=e(0),r=e.n(a);function s(t,n,e,a,r,s,o){try{var i=t[s](o),l=i.value}catch(t){return void e(t)}i.done?n(l):Promise.resolve(l).then(a,r)}var o={data:function(){return{currentRoute:this.$route.path}},computed:{loadedUser:function(){return this.$store.getters["auth/user"]}},methods:{logout:function(){var t,n=(t=r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("auth/logout");case 2:case"end":return t.stop()}},t,this)}),function(){var n=this,e=arguments;return new Promise(function(a,r){var o=t.apply(n,e);function i(t){s(o,a,r,i,l,"next",t)}function l(t){s(o,a,r,i,l,"throw",t)}i(void 0)})});return function(){return n.apply(this,arguments)}}()}},i=(e(250),e(2)),l=Object(i.a)(o,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"row"},[e("ul",{staticClass:"snip1189"},[e("li",{class:"/accueil"===this.$route.path?"current":""},[e("span",{staticClass:"logo",staticStyle:{"letter-spacing":"10px","font-size":"1.3em"}},[e("router-link",{attrs:{to:"/accueil"}},[e("span",{staticStyle:{color:"black"}},[t._v("LA")]),t._v(" "),e("span",{staticStyle:{color:"yellowgreen"}},[t._v("\n                            P\n                            "),e("span",{staticStyle:{"letter-spacing":"0"}},[t._v("\n                                A\n                            ")])]),e("br"),t._v(" "),e("span",{staticStyle:{color:"yellowgreen"}},[t._v("\n                            REN\n                            "),e("span",{staticStyle:{"letter-spacing":"0"}},[t._v("\n                                T\n                            ")])]),e("br"),t._v(" "),e("span",{staticStyle:{color:"yellowgreen"}},[t._v("\n                            HES\n                            "),e("span",{staticStyle:{"letter-spacing":"0"}},[t._v("\n                                E\n                            ")])])])],1)]),t._v(" "),e("li",{class:"/qui-sommes-nous"===this.$route.path?"current":""},[e("router-link",{attrs:{to:"/qui-sommes-nous"}},[e("br"),e("br"),t._v("\n                    QUI SOMMES-NOUS ?"),e("br"),t._v(" "),e("span",{staticStyle:{"font-weight":"300","font-size":"12px",color:"yellowgreen"}},[t._v("\n                        Histoire et membres\n                    ")])])],1),t._v(" "),e("li",{class:"/spectacles"===this.$route.path?"current":""},[e("router-link",{attrs:{to:"/spectacles"}},[e("span",{staticClass:"yellowgreen"},[e("br"),e("br"),t._v("\n                        SPECTACLES"),e("br"),t._v(" "),e("span",{staticStyle:{"font-weight":"300","font-size":"12px",color:"yellowgreen"}},[t._v("\n                            A venir et archives\n                        ")])])])],1),t._v(" "),e("li",{class:"/reservation"===this.$route.path?"current":""},[e("router-link",{attrs:{to:"/reservation"}},[e("br"),e("br"),e("br"),t._v("\n                    RESERVATION\n                ")])],1),t._v(" "),t.loadedUser&&t.loadedUser.roles?e("li",{class:"/admin"===this.$route.path?"current":""},[t.loadedUser.roles.includes("admin")?e("div",[e("router-link",{attrs:{to:"/admin"}},[e("br"),e("br"),e("br"),t._v("\n                        ADMIN\n                    ")])],1):t._e(),t._v(" "),t.loadedUser.roles.includes("user")?e("div",[e("router-link",{attrs:{to:"/mes-reservations"}},[e("br"),e("br"),e("br"),t._v("\n                        MES RESERVATIONS\n                    ")])],1):t._e()]):t._e(),t._v(" "),t.loadedUser?e("li",[e("router-link",{attrs:{to:"/logout"}},[e("br"),e("br"),e("br"),t._v("\n                    LOGOUT\n                ")])],1):t._e(),t._v(" "),t.loadedUser?t._e():e("li",[e("router-link",{attrs:{to:"/login"}},[e("br"),e("br"),e("br"),t._v("\n                    LOGIN\n                ")])],1),t._v(" "),t.loadedUser?t._e():e("li",[e("router-link",{attrs:{to:"/enregistrement"}},[e("br"),e("br"),e("br"),t._v("\n                    S'ENREGISTRER\n                ")])],1)])]),t._v(" "),e("div",{staticClass:"row my-5"},[e("div",{staticClass:"col-12",staticStyle:{border:"1px dashed green"}},[t._v("\n            loadedUser: "+t._s(t.loadedUser)),e("br"),t._v(" "),t.loadedUser?e("div",[e("router-link",{attrs:{to:"/mes-reservations"}},[t._v("Mes réservations")]),e("br"),t._v(" "),e("button",{on:{click:t.logout}},[t._v("Logout")])],1):e("div",[e("router-link",{attrs:{to:"/enregistrement"}},[t._v("S'enregistrer")]),e("br"),t._v(" "),e("router-link",{attrs:{to:"/login"}},[t._v("Login")]),e("br")],1)])])])},[],!1,null,"d033b4bc",null);n.a=l.exports},250:function(t,n,e){"use strict";var a=e(31);e.n(a).a},251:function(t,n,e){(t.exports=e(7)(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    /*.router-link-exact-active {\n        background-color: red;\n        color: black;\n    }\n    .router-link-exact-active span:before,\n    .router-link-exact-active span:after {\n        -webkit-transform: translate(0%, 0%);\n        transform: translate(0%, 0%);\n        opacity: 1;\n    }*/\n.snip1189[data-v-d033b4bc] {\n        font-family: 'Raleway', Arial, sans-serif;\n        text-align: center;\n        text-transform: uppercase;\n        font-weight: 500;\n        height: 100px;\n}\n.snip1189 *[data-v-d033b4bc] {\n        box-sizing: border-box;\n        transition: all 0.35s ease;\n}\n.snip1189 li[data-v-d033b4bc] {\n        display: inline-block;\n        list-style: outside none none;\n        margin: 0 1em;\n        padding: 0;\n        font-weight: bold;\n        height: 100px;\n        color: black;\n}\n.snip1189 a[data-v-d033b4bc] {\n        padding: 0.5em 0.5em;\n        margin: 0.2em 0;\n        display: block;\n        color: yellowgreen;\n        position: relative;\n        text-decoration: none;\n}\n.snip1189 a[data-v-d033b4bc]:before,\n    .snip1189 a[data-v-d033b4bc]:after {\n        height: 113px;\n        width: 10px;\n        position: absolute;\n        content: '';\n        transition: all 0.35s ease;\n        opacity: 0;\n        color: black;\n}\n.snip1189 a[data-v-d033b4bc]:before {\n        left: 0;\n        top: 0;\n        border-left: 5px solid black;\n        border-top: 5px solid black;\n        border-bottom: 5px solid black;\n        -webkit-transform: translate(100%, 50%);\n        transform: translate(100%, 50%);\n}\n.snip1189 a[data-v-d033b4bc]:after {\n        right: 0;\n        bottom: 0;\n        border-right: 5px solid black;\n        border-bottom: 5px solid black;\n        border-top: 5px solid black;\n        -webkit-transform: translate(-100%, -50%);\n        transform: translate(-100%, -50%);\n}\n.snip1189 a[data-v-d033b4bc]:hover,\n    .snip1189 .current a[data-v-d033b4bc],\n    .snip1189 .nocurrent a[data-v-d033b4bc] {\n        color: black;\n}\n.snip1189 a[data-v-d033b4bc]:hover:before,\n    .snip1189 .current a[data-v-d033b4bc]:before,\n    .snip1189 a[data-v-d033b4bc]:hover:after,\n    .snip1189 .current a[data-v-d033b4bc]:after {\n        -webkit-transform: translate(0%, 0%);\n        transform: translate(0%, 0%);\n        opacity: 1;\n}\n",""])},252:function(t,n,e){"use strict";var a=e(32);e.n(a).a},253:function(t,n,e){(t.exports=e(7)(!1)).push([t.i,'\n.modal-mask[data-v-48f33c6e] {\n      position: fixed;\n      z-index: 9998;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(0, 0, 0, .5);\n      display: table;\n      transition: opacity .3s ease;\n}\n.modal-wrapper[data-v-48f33c6e] {\n      display: table-cell;\n      vertical-align: middle;\n}\n.modal-container[data-v-48f33c6e] {\n      width: 500px;\n      margin: 0px auto;\n      padding: 20px 30px;\n      background-color: #fff;\n      border-radius: 2px;\n      box-shadow: 0 2px 8px rgba(0, 0, 0, .33);\n      transition: all .3s ease;\n      font-family: Helvetica, Arial, sans-serif;\n}\n.modal-header h3[data-v-48f33c6e] {\n      margin-top: 0;\n      color: #42b983;\n}\n.modal-body[data-v-48f33c6e] {\n      margin: 20px 0;\n}\n.modal-default-button[data-v-48f33c6e] {\n      float: right;\n}\n\n  /*\n  * The following styles are auto-applied to elements with\n  * transition="modal" when their visibility is toggled\n  * by Vue.js.\n  *\n  * You can easily play with the modal transition by editing\n  * these styles.\n  */\n.modal-enter[data-v-48f33c6e] {\n      opacity: 0;\n}\n.modal-leave-active[data-v-48f33c6e] {\n      opacity: 0;\n}\n.modal-enter .modal-container[data-v-48f33c6e],\n  .modal-leave-active .modal-container[data-v-48f33c6e] {\n      -webkit-transform: scale(1.1);\n      transform: scale(1.1);\n}\n.seat[data-v-48f33c6e] {\n}\n[data-v-48f33c6e] .seat:hover {\n      cursor: pointer;\n      fill: yellow;\n}\n',""])},259:function(t,n,e){"use strict";var a=e(37);e.n(a).a},260:function(t,n,e){(t.exports=e(7)(!1)).push([t.i,"\n[data-v-a56ec452] .table {\n  /*fill: yellow;*/\n}\n[data-v-a56ec452] .table:hover {\n  cursor: pointer;\n  fill: green;\n}\n",""])},31:function(t,n,e){var a=e(251);"string"==typeof a&&(a=[[t.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};e(8)(a,r);a.locals&&(t.exports=a.locals)},32:function(t,n,e){var a=e(253);"string"==typeof a&&(a=[[t.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};e(8)(a,r);a.locals&&(t.exports=a.locals)},37:function(t,n,e){var a=e(260);"string"==typeof a&&(a=[[t.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};e(8)(a,r);a.locals&&(t.exports=a.locals)},50:function(t,n,e){"use strict";var a,r=e(0),s=e.n(r),o=e(3),i=e.n(o);function l(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function c(t,n,e,a,r,s,o){try{var i=t[s](o),l=i.value}catch(t){return void e(t)}i.done?n(l):Promise.resolve(l).then(a,r)}function d(t){return function(){var n=this,e=arguments;return new Promise(function(a,r){var s=t.apply(n,e);function o(t){c(s,a,r,o,i,"next",t)}function i(t){c(s,a,r,o,i,"throw",t)}o(void 0)})}}var u=(l(a={props:["selectedTable"],created:{},data:function(){return{selectedSeat:""}}},"created",function(){var t=d(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()),l(a,"mounted",function(){console.log("SVG.supported: ",SVG.supported),SVG.supported&&this.selectedTable.seats.forEach(function(t){console.log("seat: ",t);var n=SVG.get(t.svg_seat_id);console.log("element: ",n),n&&t.is_reserved&&(n.fill("#FF0000"),n.removeClass("seat"))})}),l(a,"computed",{loadedUser:function(){return this.$store.getters["auth/user"]}}),l(a,"methods",{selectSeat:function(){var t=d(s.a.mark(function t(){var n,e,a,r,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("selectSeat"),n=event.target.id,this.selectedSeat=n,e=SVG.get(n),a=!1,e&&(a=e.hasClass("seat")),!a){t.next=15;break}return t.next=9,i.a.post("api/reserve-a-seat",{seatId:n});case 9:r=t.sent,o=r.data,console.log("data: ",o),e.fill("#FF0000"),e.removeClass("seat"),this.$store.commit("planSeats/addUserSeat",o.seat);case 15:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}),a),v=(e(252),e(2)),p=Object(v.a)(u,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"modal-mask"},[e("div",{staticClass:"modal-wrapper"},[e("div",{staticClass:"modal-container",staticStyle:{"overflow-y":"auto","max-height":"400px"}},[e("div",{staticClass:"modal-body",staticStyle:{border:"1px dashed red"}},[e("button",{staticClass:"modal-default-button",on:{click:function(n){return t.$emit("closeModal")}}},[t._v("Close")]),t._v("\n                        selectedTable: "+t._s(t.selectedTable)),e("br"),e("br"),t._v(" "),t._v("\n                        selectedSeat: "+t._s(t.selectedSeat)),e("br"),e("br"),t._v(" "),e("div",{attrs:{id:"drawing"},on:{click:function(n){return t.selectSeat(n)}}},[e("svg-vue",{attrs:{icon:"tables/table_"+t.selectedTable.table.svg_id}})],1)]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"modal-default-button",on:{click:function(n){return t.$emit("closeModal")}}},[t._v("Close")])])])])])])},[],!1,null,"48f33c6e",null);n.a=p.exports},68:function(t,n,e){"use strict";e.r(n);var a=e(0),r=e.n(a),s=e(3),o=e.n(s),i=e(26),l=e.n(i),c=e(50),d=e(13);function u(t,n,e,a,r,s,o){try{var i=t[s](o),l=i.value}catch(t){return void e(t)}i.done?n(l):Promise.resolve(l).then(a,r)}var v={created:function(){var t,n=(t=r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.userSeats.length<1&&this.loadedUser)){t.next=3;break}return t.next=3,this.$store.dispatch("planSeats/fetchUserSeats",{userId:this.loadedUser.id});case 3:case"end":return t.stop()}},t,this)}),function(){var n=this,e=arguments;return new Promise(function(a,r){var s=t.apply(n,e);function o(t){u(s,a,r,o,i,"next",t)}function i(t){u(s,a,r,o,i,"throw",t)}o(void 0)})});return function(){return n.apply(this,arguments)}}(),computed:{loadedUser:function(){return this.$store.getters["auth/user"]},userSeats:function(){return this.$store.getters["planSeats/userSeats"]}},methods:{clickOnTablePlan:function(t){console.log("clickOnTablePlan: ",t);var n=t.target.id;console.log("elementId: ",n),n?(this.selectedTable=n,this.showModal=!0):this.selectedTable=null}}},p=e(2),b=Object(p.a)(v,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("h1",{staticClass:"text-center my-3"},[t._v("Mes réservations")]),t._v(" "),t._m(0),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[t._v("Primary")]),t._v(" "),e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[t._v("Secondary")]),t._v(" "),e("button",{staticClass:"btn btn-light",attrs:{type:"button"}},[t._v("Light")]),t._v(" "),e("br"),e("br"),t._v("\n    userSeats: "+t._s(t.userSeats)),e("br"),t._v(" "),e("table",{staticClass:"table table-striped"},[t._m(1),t._v(" "),e("tbody",t._l(t.userSeats,function(n,a){return e("tr",{key:n.id},[e("th",{attrs:{scope:"row"}},[t._v(t._s(a+1))]),t._v(" "),e("td",[t._v(t._s(n.table_id))]),t._v(" "),e("td",[t._v(t._s(n.user_id))]),t._v(" "),e("td",[t._v(t._s(n.status))])])}),0)])])},[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"dropdown"},[n("button",{staticClass:"btn btn-dark dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this._v("\n            Dropdown button\n        ")]),this._v(" "),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[n("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[this._v("Action")]),this._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[this._v("Another action")]),this._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[this._v("Something else here")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[this._v("#")]),this._v(" "),n("th",{attrs:{scope:"col"}},[this._v("Table")]),this._v(" "),n("th",{attrs:{scope:"col"}},[this._v("User")]),this._v(" "),n("th",{attrs:{scope:"col"}},[this._v("Status")])])])}],!1,null,"2664a264",null).exports;function f(t,n,e,a,r,s,o){try{var i=t[s](o),l=i.value}catch(t){return void e(t)}i.done?n(l):Promise.resolve(l).then(a,r)}function h(t){return function(){var n=this,e=arguments;return new Promise(function(a,r){var s=t.apply(n,e);function o(t){f(s,a,r,o,i,"next",t)}function i(t){f(s,a,r,o,i,"throw",t)}o(void 0)})}}var _={components:{Navbar:d.a,Modal:c.a,UserReservations:b},metaInfo:function(){return{title:"Réservation"}},created:function(){var t=h(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),mounted:function(){var t=h(r.a.mark(function t(){var n,e,a,s,o,i,c,d,u;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("planTables/fetchPlanTables");case 2:console.log("this.planTables: ",this.planTables),console.log("this.planTables[0]: ",this.planTables[0]),n=!0,e=!1,a=void 0,t.prev=7,s=this.planTables[Symbol.iterator]();case 9:if(n=(o=s.next()).done){t.next=24;break}return i=o.value,console.log("table: ",i),t.next=14,this.$store.dispatch("planTables/fetchSeatsByTable",{svgId:i.svg_id});case 14:console.log("SVG.get(table.svg_id): ",l.a.get(i.svg_id)),c=l.a.get(i.svg_id),d=i.total_seats,console.log("total_seats: ",d),u=this.$store.getters["planTables/tableSeats"][i.svg_id].filter(function(t){return 1==t.is_reserved}),console.log("reserved_seats: ",u),u.length>=d?(c.fill("#FF0000"),c.removeClass("seat")):d-u.length<=2?c.fill("#FFA500"):c.fill("#00FF00");case 21:n=!0,t.next=9;break;case 24:t.next=30;break;case 26:t.prev=26,t.t0=t.catch(7),e=!0,a=t.t0;case 30:t.prev=30,t.prev=31,n||null==s.return||s.return();case 33:if(t.prev=33,!e){t.next=36;break}throw a;case 36:return t.finish(33);case 37:return t.finish(30);case 38:l.a.supported;case 39:case"end":return t.stop()}},t,this,[[7,26,30,38],[31,,33,37]])}));return function(){return t.apply(this,arguments)}}(),data:function(){return{showModal:!1,selectedTable:null}},computed:{planTables:function(){return this.$store.getters["planTables/planTables"]}},methods:{clickOnTablePlan:function(){var t=h(r.a.mark(function t(n){var e,a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("clickOnTablePlan: ",n),e=n.target.id,console.log("tableId: ",e),!e){t.next=13;break}return t.next=6,o.a.get("api/plan-tables/".concat(e));case 6:a=t.sent,s=a.data,console.log("data: ",s),this.selectedTable=s,this.showModal=!0,t.next=14;break;case 13:this.selectedTable=null;case 14:case"end":return t.stop()}},t,this)}));return function(n){return t.apply(this,arguments)}}()}},m=(e(259),Object(p.a)(_,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("navbar"),t._v(" "),e("h1",{staticClass:"text-center my-3"},[t._v("Réserver une place")]),t._v("\n\t\tselectedTable: "+t._s(t.selectedTable)),e("br"),e("br"),t._v("\n\t\tplanTables: "+t._s(t.planTables)),e("br"),e("br"),t._v(" "),e("router-link",{attrs:{to:"/mes-reservations"}},[t._v("Mes reservations")]),t._v(" "),e("user-reservations"),t._v(" "),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-6"},[e("div",{staticStyle:{border:"1px dashed green"},on:{click:function(n){return t.clickOnTablePlan(n)}}},[e("svg-vue",{staticStyle:{border:"1px solid orange"},attrs:{icon:"tables_plan"}})],1)])]),t._v(" "),t.showModal?e("modal",{attrs:{selectedTable:t.selectedTable},on:{closeModal:function(n){t.showModal=!1}}}):t._e()],1)},[],!1,null,"a56ec452",null));n.default=m.exports}}]);