(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{303:function(n,t,e){"use strict";var o=e(54);e.n(o).a},304:function(n,t,e){(n.exports=e(7)(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* ANIMATIONS */\n\n/* Simple CSS3 Fade-in-down Animation */\n.fadeInDown[data-v-b71b0cc6] {\n  -webkit-animation-name: fadeInDown-data-v-b71b0cc6;\n  animation-name: fadeInDown-data-v-b71b0cc6;\n  -webkit-animation-duration: 1s;\n  animation-duration: 1s;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n}\n@-webkit-keyframes fadeInDown-data-v-b71b0cc6 {\n0% {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -100%, 0);\n    transform: translate3d(0, -100%, 0);\n}\n100% {\n    opacity: 1;\n    -webkit-transform: none;\n    transform: none;\n}\n}\n@keyframes fadeInDown-data-v-b71b0cc6 {\n0% {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -100%, 0);\n    transform: translate3d(0, -100%, 0);\n}\n100% {\n    opacity: 1;\n    -webkit-transform: none;\n    transform: none;\n}\n}\n",""])},54:function(n,t,e){var o=e(304);"string"==typeof o&&(o=[[n.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};e(8)(o,r);o.locals&&(n.exports=o.locals)},74:function(n,t,e){"use strict";e.r(t);var o=e(0),r=e.n(o),a=e(5),i=e.n(a);function s(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function c(n){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function m(n,t,e,o,r,a,i){try{var s=n[a](i),c=s.value}catch(n){return void e(n)}s.done?t(c):Promise.resolve(c).then(o,r)}function l(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===c(n)&&(e=n,n=""),e=function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},o=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.forEach(function(t){s(n,t,e[t])})}return n}({url:n,title:t,width:600,height:720},e);var o=void 0!==window.screenLeft?window.screenLeft:window.screen.left,r=void 0!==window.screenTop?window.screenTop:window.screen.top,a=window.innerWidth||document.documentElement.clientWidth||window.screen.width,i=window.innerHeight||document.documentElement.clientHeight||window.screen.height;e.left=a/2-e.width/2+o,e.top=i/2-e.height/2+r;var m=Object.keys(e).reduce(function(n,t){return n.push("".concat(t,"=").concat(e[t])),n},[]).join(","),l=window.open(n,t,m);return window.focus&&l.focus(),l}var u={name:"LoginWithGithub",computed:{githubAuth:function(){return window.config.githubAuth},url:function(){return"/api/oauth/github"}},mounted:function(){window.addEventListener("message",this.onMessage,!1)},beforeDestroy:function(){window.removeEventListener("message",this.onMessage)},methods:{login:function(){var n,t=(n=r.a.mark(function n(){var t,e;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=l("",this.$t("login")),n.next=3,this.$store.dispatch("auth/fetchOauthUrl",{provider:"github"});case 3:e=n.sent,t.location.href=e;case 5:case"end":return n.stop()}},n,this)}),function(){var t=this,e=arguments;return new Promise(function(o,r){var a=n.apply(t,e);function i(n){m(a,o,r,i,s,"next",n)}function s(n){m(a,o,r,i,s,"throw",n)}i(void 0)})});return function(){return t.apply(this,arguments)}}(),onMessage:function(n){n.origin===window.origin&&n.data.token&&(this.$store.dispatch("auth/saveToken",{token:n.data.token}),this.$router.push({name:"home"}))}}},f=e(2);function d(n,t,e,o,r,a,i){try{var s=n[a](i),c=s.value}catch(n){return void e(n)}s.done?t(c):Promise.resolve(c).then(o,r)}var p={middleware:"guest",layout:"frontend",components:{LoginWithGithub:Object(f.a)(u,function(){var n=this.$createElement,t=this._self._c||n;return this.githubAuth?t("button",{staticClass:"btn btn-dark ml-auto",attrs:{type:"button"},on:{click:this.login}},[this._v("\n  "+this._s(this.$t("login_with"))+"\n  "),t("fa",{attrs:{icon:["fab","github"]}})],1):this._e()},[],!1,null,null,null).exports},metaInfo:function(){return{title:"S'enregistrer"}},data:function(){return{form:new i.a({name:"",email:"",password:"",password_confirmation:""}),mustVerifyEmail:!1}},methods:{register:function(){var n,t=(n=r.a.mark(function n(){var t,e,o,a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.form.post("/api/register");case 2:if(t=n.sent,!(e=t.data).status){n.next=8;break}this.mustVerifyEmail=!0,n.next=18;break;case 8:return n.next=10,this.form.post("/api/login");case 10:return o=n.sent,a=o.data.token,this.$store.dispatch("auth/saveToken",{token:a}),n.next=15,this.$store.dispatch("auth/updateUser",{user:e});case 15:return n.next=17,this.$store.dispatch("auth/fetchUser");case 17:this.$router.push({name:"accueil"});case 18:case"end":return n.stop()}},n,this)}),function(){var t=this,e=arguments;return new Promise(function(o,r){var a=n.apply(t,e);function i(n){d(a,o,r,i,s,"next",n)}function s(n){d(a,o,r,i,s,"throw",n)}i(void 0)})});return function(){return t.apply(this,arguments)}}()}},v=(e(303),Object(f.a)(p,function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"row justify-content-center align-items-center fadeInDown"},[e("div",{staticClass:"col-lg-8 m-auto"},[n.mustVerifyEmail?e("card",{attrs:{title:"Enregistrement"}},[e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[n._v("\n                        "+n._s(n.$t("verify_email_address"))+"\n                    ")])]):e("card",{attrs:{title:"S'enregistrer"}},[e("form",{on:{submit:function(t){return t.preventDefault(),n.register(t)},keydown:function(t){return n.form.onKeydown(t)}}},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-3 col-form-label text-md-right"},[n._v("Nom")]),n._v(" "),e("div",{staticClass:"col-md-7"},[e("input",{directives:[{name:"model",rawName:"v-model",value:n.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":n.form.errors.has("name")},attrs:{type:"text",name:"name"},domProps:{value:n.form.name},on:{input:function(t){t.target.composing||n.$set(n.form,"name",t.target.value)}}}),n._v(" "),e("has-error",{attrs:{form:n.form,field:"name"}})],1)]),n._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-3 col-form-label text-md-right"},[n._v("E-mail")]),n._v(" "),e("div",{staticClass:"col-md-7"},[e("input",{directives:[{name:"model",rawName:"v-model",value:n.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":n.form.errors.has("email")},attrs:{type:"email",name:"email"},domProps:{value:n.form.email},on:{input:function(t){t.target.composing||n.$set(n.form,"email",t.target.value)}}}),n._v(" "),e("has-error",{attrs:{form:n.form,field:"email"}})],1)]),n._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-3 col-form-label text-md-right"},[n._v("Mot de passe")]),n._v(" "),e("div",{staticClass:"col-md-7"},[e("input",{directives:[{name:"model",rawName:"v-model",value:n.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":n.form.errors.has("password")},attrs:{type:"password",name:"password"},domProps:{value:n.form.password},on:{input:function(t){t.target.composing||n.$set(n.form,"password",t.target.value)}}}),n._v(" "),e("has-error",{attrs:{form:n.form,field:"password"}})],1)]),n._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-3 col-form-label text-md-right"},[n._v("Confirmer mot de passe")]),n._v(" "),e("div",{staticClass:"col-md-7"},[e("input",{directives:[{name:"model",rawName:"v-model",value:n.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"form-control",class:{"is-invalid":n.form.errors.has("password_confirmation")},attrs:{type:"password",name:"password_confirmation"},domProps:{value:n.form.password_confirmation},on:{input:function(t){t.target.composing||n.$set(n.form,"password_confirmation",t.target.value)}}}),n._v(" "),e("has-error",{attrs:{form:n.form,field:"password_confirmation"}})],1)]),n._v(" "),e("div",{staticClass:"form-group row"},[e("div",{staticClass:"col-md-7 offset-md-3 d-flex"},[e("v-button",{attrs:{loading:n.form.busy}},[n._v("\n                                    S'enregistrer\n                                ")]),n._v(" "),e("login-with-github")],1)])])])],1)])])},[],!1,null,"b71b0cc6",null));t.default=v.exports}}]);