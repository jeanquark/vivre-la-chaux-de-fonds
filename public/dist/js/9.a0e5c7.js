(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{253:function(e,t,n){"use strict";var o=n(33);n.n(o).a},254:function(e,t,n){(e.exports=n(8)(!1)).push([e.i,".image[data-v-0c469a20]:hover {\n  border: 2px solid #2C5CAD;\n}",""])},255:function(e,t,n){"use strict";var o=n(34);n.n(o).a},256:function(e,t,n){(e.exports=n(8)(!1)).push([e.i,"\n#textBox[data-v-956ed0fc] {\r\n    width: 540px;\r\n    height: 200px;\r\n    border: 1px #000000 solid;\r\n    padding: 12px;\r\n    overflow: scroll;\n}\n#textBox #sourceText[data-v-956ed0fc] {\r\n    padding: 0;\r\n    margin: 0;\r\n    min-width: 498px;\r\n    min-height: 200px;\n}\n[data-v-956ed0fc] #textBox img:hover {\r\n    border: 2px solid red;\r\n    resize: both;\n}\n#editMode label[data-v-956ed0fc] {\r\n    cursor: pointer;\n}\n.intLink[data-v-956ed0fc] {\r\n    cursor: pointer;\n}\nimg.intLink[data-v-956ed0fc] {\r\n    border: 1px solid #000;\n}\n.resizable[data-v-956ed0fc] {\r\n    display: inline-block;\r\n    background: red;\r\n    resize: both;\r\n    overflow: hidden;\r\n    line-height: 0;\n}\n.resizable img[data-v-956ed0fc] {\r\n    width: 100%;\r\n    height: 100%;\n}\r\n",""])},33:function(e,t,n){var o=n(254);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(9)(o,r);o.locals&&(e.exports=o.locals)},34:function(e,t,n){var o=n(256);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(9)(o,r);o.locals&&(e.exports=o.locals)},62:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(3),i=n.n(a);function c(e,t,n,o,r,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,r)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function i(e){c(a,o,r,i,s,"next",e)}function s(e){c(a,o,r,i,s,"throw",e)}i(void 0)})}}var l={props:["showModal"],created:function(){var e=s(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=s(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("mounted"),e.next=3,i.a.get("/api/list-all-files");case 3:t=e.sent,n=t.data,console.log("data: ",n),this.files=n.files;case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),data:function(){return{files:[]}},computed:{},methods:{selectFile:function(e){console.log("selectFile: ",e),this.$emit("insertFile",e)}},watch:{showModal:function(e,t){console.log("Prop changed: ",e," | was: ",t),e?this.$bvModal.show("modal-1"):this.$bvModal.hide("modal-1")}}},d=(n(253),n(2));function u(e,t,n,o,r,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,r)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function i(e){u(a,o,r,i,c,"next",e)}function c(e){u(a,o,r,i,c,"throw",e)}i(void 0)})}}var f={components:{FilesModal:Object(d.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"modal-1",title:"BootstrapVue"}},[n("p",{staticClass:"my-4"},[e._v("Hello from modal!")]),e._v("\n    showModal: "+e._s(e.showModal)),n("br"),n("br"),e._v("\n    files: "+e._s(e.files)+"\n    "),e._l(e.files,function(t,o){return n("div",{key:o,on:{click:function(n){return e.selectFile(t)}}},[n("img",{staticClass:"image",attrs:{src:"/images/"+t,width:"100"}})])})],2)},[],!1,null,"0c469a20",null).exports},created:function(){var e=m(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){},data:function(){return{newPage:{},content:'<p>Ceci est mon texte en <b>gras</b>.</p><img src="/images/logo.png" width="100" />',checked:!1,showModal:!1}},computed:{loading:function(){return this.$store.getters["loading/loading"]}},methods:{selectedElement:function(e){console.log("selectedElement: ",e.target),e.target.width="200"},openFilesModal:function(){console.log("openFilesModal: "),this.showModal=!this.showModal},insertDiv:function(e){document.execCommand("formatBlock",!1,"div"),window.getSelection().focusNode.parentNode.className="col-6"},insertFile:function(e){console.log("insertFile: ",e);var t="/images/".concat(e);document.execCommand("insertImage",!1,t)},showHTML:function(){},formatDoc:function(e,t){console.log("sCmd: ",e),console.log("sValue: ",t),console.log("document.compForm: ",document.compForm),document.execCommand(e,!1,t)},setDocMode:function(e){console.log("bToSource: ",e),console.log("this.checked: ",this.checked);var t,n=document.getElementById("textBox");if(console.log("oDoc: ",n),e){t=document.createTextNode(n.innerHTML),console.log("oContent: ",t),n.innerHTML="";var o=document.createElement("pre");n.contentEditable=!1,o.id="sourceText",o.contentEditable=!0,o.appendChild(t),n.appendChild(o),document.execCommand("defaultParagraphSeparator",!1,"div")}else document.all?n.innerHTML=n.innerText:((t=document.createRange()).selectNodeContents(n.firstChild),n.innerHTML=t.toString()),n.contentEditable=!0;n.focus()},createNewPage:function(){var e=m(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log('document.getElementById("textBox").innerHTML: ',document.getElementById("textBox").innerHTML),console.log("this.abc: ",this.$refs.abc),e.abrupt("return");case 7:this.$store.commit("loading/SET_LOADING",!1),this.$noty.success("Nouvelle page créée avec succès!"),this.$router.push("/admin/pages"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),this.$store.commit("loading/SET_LOADING",!1),this.$noty.error("Une erreur est survenue et la nouvelle page n'a pas pu être créée.");case 16:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}()}},p=(n(255),Object(d.a)(f,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("b-breadcrumb",[n("b-breadcrumb-item",{staticClass:"navigation",attrs:{to:"/admin/pages"}},[n("font-awesome-icon",{attrs:{icon:"file-alt"}}),e._v(" "),n("span",[e._v("Plans")])],1),e._v(" "),n("b-breadcrumb-item",{attrs:{active:""}},[e._v("Créer")])],1),e._v(" "),n("h2",{staticClass:"text-center"},[e._v("Ajouter une nouvelle page")]),e._v(" "),n("b-form",{on:{submit:function(t){return t.preventDefault(),e.createNewPage(t)}}},[n("b-row",{staticClass:"justify-content-start my-3 px-3",attrs:{"align-v":"center"}},[n("b-col",{attrs:{cols:"12",md:"6"}},[n("b-form-group",{attrs:{label:"Entrer un titre pour cette page:","label-for":"newPageTitle"}},[n("b-form-input",{attrs:{id:"newPageTitle",placeholder:"Titre de la page"},model:{value:e.newPage.title,callback:function(t){e.$set(e.newPage,"title",t)},expression:"newPage.title"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{label:"Contenu de la page:","label-for":"newPageContent"}},[n("img",{staticClass:"intLink",staticStyle:{border:"1px solid #000"},attrs:{title:"Bold",src:"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAInhI+pa+H9mJy0LhdgtrxzDG5WGFVk6aXqyk6Y9kXvKKNuLbb6zgMFADs="},on:{click:function(t){return e.formatDoc("bold")}}}),e._v(" "),n("img",{staticClass:"intLink",attrs:{title:"Italic",src:"data:image/gif;base64,R0lGODlhFgAWAKEDAAAAAF9vj5WIbf///yH5BAEAAAMALAAAAAAWABYAAAIjnI+py+0Po5x0gXvruEKHrF2BB1YiCWgbMFIYpsbyTNd2UwAAOw=="},on:{click:function(t){return e.formatDoc("italic")}}}),e._v(" "),n("img",{staticClass:"intLink",attrs:{title:"Underline",src:"data:image/gif;base64,R0lGODlhFgAWAKECAAAAAF9vj////////yH5BAEAAAIALAAAAAAWABYAAAIrlI+py+0Po5zUgAsEzvEeL4Ea15EiJJ5PSqJmuwKBEKgxVuXWtun+DwxCCgA7"},on:{click:function(t){return e.formatDoc("underline")}}}),e._v(" "),n("img",{staticClass:"intLink",attrs:{title:"Underline",src:"/images/icon-image.png",width:"30"},on:{click:function(t){return t.preventDefault(),e.openFilesModal()}}}),e._v(" "),n("button",{on:{click:function(t){return t.preventDefault(),e.insertDiv("12")}}},[e._v("Insert div")]),e._v(" "),n("div",{ref:"abc",attrs:{contenteditable:"true",id:"textBox"},domProps:{innerHTML:e._s(e.content)},on:{mouseover:e.selectedElement}}),e._v(" "),n("button",{on:{click:e.showHTML}},[e._v("Show HTML")]),e._v(" "),n("p",{attrs:{id:"editMode"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"checked"}],attrs:{type:"checkbox",name:"switchMode",id:"switchBox"},domProps:{checked:Array.isArray(e.checked)?e._i(e.checked,null)>-1:e.checked},on:{click:function(t){return e.setDocMode(e.checked)},change:function(t){var n=e.checked,o=t.target,r=!!o.checked;if(Array.isArray(n)){var a=e._i(n,null);o.checked?a<0&&(e.checked=n.concat([null])):a>-1&&(e.checked=n.slice(0,a).concat(n.slice(a+1)))}else e.checked=r}}}),e._v(" "),n("label",{attrs:{for:"switchBox"}},[e._v("Show HTML")])]),e._v("\n                    checked: "+e._s(e.checked)),n("br"),n("br"),e._v("\n                    content: "+e._s(e.content)+"\n                ")])],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-center my-2"},[n("b-button",{attrs:{variant:"primary",disabled:e.loading,type:"submit"}},[e.loading?n("b-spinner",{attrs:{small:"",type:"grow"}}):e._e(),e._v("\n                Créer nouvelle page\n            ")],1)],1)],1),e._v(" "),n("files-modal",{attrs:{showModal:e.showModal},on:{insertFile:e.insertFile}}),e._v("\n    showModal: "+e._s(e.showModal)),n("br"),n("br")],1)},[],!1,null,"956ed0fc",null));t.default=p.exports}}]);