(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{15:function(e,t,n){"use strict";var r=n(0),a=n.n(r);function s(e,t,n,r,a,s,o){try{var i=e[s](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,l,"next",e)}function l(e){s(o,r,a,i,l,"throw",e)}i(void 0)})}}var i={props:["selectedImageProps"],created:function(){var e=o(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=o(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),data:function(){return{showImagePropertiesSidebar:!0}},computed:{},methods:{updateSelectedImage:function(e,t){console.log("updateSelectedImage: ",e,t),this.$emit("updateSelectedImageProperties",e,t)},closeModal:function(){console.log("closeModal"),this.$emit("closeImagePropertiesToast",!1)}}},l=(n(276),n(2)),c=Object(l.a)(i,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-toast",{attrs:{id:"example-toast",title:"Propriétés de l'image",static:"","no-auto-hide":""}},[e._v("\n    selectedImageProps: "+e._s(e.selectedImageProps)),n("br"),n("br"),e._v(" "),n("b-row",{staticClass:"justify-content-center"},[n("b-col",{attrs:{cols:"12",md:"12",lg:"6"}},[n("b-form-group",{attrs:{label:"Largeur (px)","label-for":"width"}},[n("b-form-input",{attrs:{type:"number",min:"0",id:"width",value:e.selectedImageProps.width},on:{update:function(t){return e.updateSelectedImage(t,"width")}}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12",md:"12",lg:"6"}},[n("b-form-group",{attrs:{label:"Hauteur (px)","label-for":"height"}},[n("b-form-input",{attrs:{type:"number",min:"0",id:"height",value:e.selectedImageProps.height},on:{update:function(t){return e.updateSelectedImage(t,"height")}}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12",md:"12",lg:"6"}},[n("b-form-group",{attrs:{label:"Marges (px)","label-for":"margin"}},[n("b-form-input",{attrs:{type:"number",min:"0",id:"margin",value:e.selectedImageProps.style.margin},on:{update:function(t){return e.updateSelectedImage(t,"margin")}}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12",md:"12",lg:"6"}},[n("b-form-group",{attrs:{label:"Marge droite (px)","label-for":"marginRight"}},[n("b-form-input",{attrs:{type:"number",min:"0",id:"marginRight",value:e.selectedImageProps.style.marginRight},on:{update:function(t){return e.updateSelectedImage(t,"marginRight")}}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12",md:"12",lg:"6"}},[n("b-form-group",{attrs:{label:"Float","label-for":"float"}},[n("b-form-select",{attrs:{options:["left","right"],id:"float",value:e.selectedImageProps.style.float},on:{change:function(t){return e.updateSelectedImage(t,"float")}}})],1)],1)],1)],1)},[],!1,null,"357bf08c",null);t.a=c.exports},16:function(e,t,n){"use strict";var r=n(0),a=n.n(r),s=n(5),o=n.n(s),i=n(4),l=n.n(i),c=n(11);function u(e,t,n,r,a,s,o){try{var i=e[s](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var s=e.apply(t,n);function o(e){u(s,r,a,o,i,"next",e)}function i(e){u(s,r,a,o,i,"throw",e)}o(void 0)})}}var m={created:function(){var e=d(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=d(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("DocumentsModal mounted!"),e.next=3,l.a.get("/api/list-all-documents");case 3:t=e.sent,n=t.data,console.log("data: ",n),this.files=n.files;case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),data:function(){return{files:[],showSidebar:!1,selectedFile:null,form:new o.a({document:null})}},computed:{loading:function(){return this.$store.getters["loading/loading"]}},methods:{onFileChange:function(e){var t=e.target.files[0];this.url=URL.createObjectURL(t),this.form.document=t},selectFile:function(e){console.log("selectFile: ",e),this.showSidebar=!0,this.selectedFile=e},insertFile:function(e,t){var n=this.formatRemoveFileExtension(e);console.log("insertFile: ",e,t,n),this.$emit("closeDocumentsModal",!1),this.$emit("insertFile",e,t,n),this.showSidebar=!1,this.$bvModal.hide("filesModal")},formatFileName:function(e){var t=e.lastIndexOf("/");return e.substring(t+1)},formatRemoveFileExtension:function(e){var t=e.lastIndexOf(".");return e.substring(0,t)},uploadDocument:function(){var e=d(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("this.form: ",this.form),this.$store.commit("loading/SET_LOADING",!0),e.next=5,this.form.submit("post","/api/pages/upload-document",{transformRequest:[function(e,t){return Object(c.a)(e)}]});case 5:t=e.sent,n=t.data,console.log("data: ",n),this.$store.commit("loading/SET_LOADING",!1),this.$noty.success("Document ajouté avec succès."),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("error: ",e.t0),this.$noty.error("Nous sommes désolés. Une erreur est survenue et le document n'a pas pu être uploadé."),this.$store.commit("loading/SET_LOADING",!1);case 17:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),closeModal:function(){console.log("closeModal"),this.$emit("closeDocumentsModal",!1),this.$bvModal.hide("documentsModal")}}},f=(n(274),n(2)),p=Object(f.a)(m,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{size:"xl",id:"documentsModal",title:"Gestion des documents","ok-disabled":"","no-close-on-esc":"","no-close-on-backdrop":""},on:{close:e.closeModal},scopedSlots:e._u([{key:"modal-title",fn:function(){return[n("span",{staticClass:"unselectable"},[e._v("Manager Documents")])]},proxy:!0},{key:"modal-footer",fn:function(){return[n("div",{staticClass:"w-100"},[n("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"md"},on:{click:e.closeModal}},[e._v("\n                Fermer\n            ")])],1)]},proxy:!0}])},[e._v(" "),n("b-tabs",{attrs:{"content-class":"mt-3"}},[n("b-tab",{attrs:{title:"Documents",active:""}},[n("b-sidebar",{staticClass:"unselectable",attrs:{"aria-controls":"details",title:"Détails",shadow:"",width:"420px"},scopedSlots:e._u([{key:"footer",fn:function(t){var r=t.hide;return[n("div",{staticClass:"d-flex bg-dark text-light justify-content-center align-items-center px-3 py-2"},[n("b-button",{attrs:{size:"sm"},on:{click:r}},[e._v("Fermer")])],1)]}}]),model:{value:e.showSidebar,callback:function(t){e.showSidebar=t},expression:"showSidebar"}},[e.selectedFile?n("div",{staticClass:"px-3 py-2 text-white"},[n("div",{staticClass:"text-center"},[n("b-img",{ref:"selectedImage",staticClass:"mb-3",attrs:{src:"/images/icons/pdf-icon.png",fluid:"",thumbnail:""}})],1),e._v(" "),n("p",{},[e._v("\n                        Nom: "),n("b",[e._v(e._s(e.selectedFile[0]))]),n("br"),e._v("\n                        Type: "),n("b",[e._v(e._s(e.formatFileName(e.selectedFile[1])))]),n("br"),e._v("\n                        Taille: "),n("b",[e._v(e._s(e.selectedFile[2]/1e3)+" Ko")]),n("br"),e._v("\n                        Dernière modification: "),n("b",[e._v(e._s(e._f("moment")(e.selectedFile[3],"DD-MM-YYYY HH:mm")))]),n("br")]),e._v(" "),n("div",{staticClass:"text-center"},[n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.insertFile(e.selectedFile[0],e.selectedFile[1])}}},[e._v("Insérer document")])],1)]):e._e()]),e._v(" "),n("b-row",{staticClass:"justify-content-center my-3"},e._l(e.files,function(t,r){return n("b-col",{key:r,attrs:{cols:"6",md:"3",lg:"2"},on:{click:function(n){return e.selectFile(t)}}},[n("b-img",{staticClass:"image",attrs:{thumbnail:"",fluid:"",src:"/images/icons/pdf-icon.png"}}),e._v(" "),n("p",{staticClass:"text-center unselectable",staticStyle:{"word-break":"break-word"}},[e._v(e._s(e.formatFileName(t[0])))])],1)}),1)],1),e._v(" "),n("b-tab",{attrs:{title:"Uploader un document"}},[n("b-row",{staticClass:"justify-content-center my-3"},[n("b-col",{attrs:{cols:"12",md:"6",lg:"4"}},[n("b-form-file",{class:{"is-invalid":e.form.errors.has("image")},attrs:{accept:".pdf",placeholder:"Choisir un fichier...","drop-placeholder":"Placer le fichier ici..."},on:{change:e.onFileChange}}),e._v(" "),n("has-error",{attrs:{form:e.form,field:"document"}})],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-center my-3"},[n("b-button",{attrs:{variant:"primary",disabled:e.loading},on:{click:function(t){return t.preventDefault(),e.uploadDocument(t)}}},[e.loading?n("b-spinner",{attrs:{small:"",type:"grow"}}):e._e(),e._v(" Uploader")],1)],1)],1)],1)],1)},[],!1,null,"778fc4d6",null);t.a=p.exports},17:function(e,t,n){"use strict";var r=n(0),a=n.n(r),s=n(5),o=n.n(s),i=n(4),l=n.n(i),c=n(11);function u(e,t,n,r,a,s,o){try{var i=e[s](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var s=e.apply(t,n);function o(e){u(s,r,a,o,i,"next",e)}function i(e){u(s,r,a,o,i,"throw",e)}o(void 0)})}}var m={created:function(){var e=d(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=d(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("FilesModal mounted!"),e.next=3,l.a.get("/api/list-all-images");case 3:t=e.sent,n=t.data,console.log("data: ",n),this.files=n.files;case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),data:function(){return{showSidebar:!1,selectedFile:null,files:[],form:new o.a({image:null}),selectedImageHeight:null,selectedImageWidth:null,url:null}},computed:{},methods:{onFileChange:function(e){var t=e.target.files[0];this.url=URL.createObjectURL(t),this.form.image=t},selectFile:function(e){console.log("selectFile: ",e),this.showSidebar=!0,this.selectedFile=e},insertFile:function(e){this.$emit("insertImage",e),this.showSidebar=!1,this.$bvModal.hide("filesModal")},formatImageName:function(e){var t=e.lastIndexOf("/");return e.substring(t+1)},uploadImage:function(){var e=d(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("this.form: ",this.form),e.next=3,this.form.submit("post","/api/pages/upload-image",{transformRequest:[function(e,t){return Object(c.a)(e)}]});case 3:t=e.sent,n=t.data,console.log("data: ",n),this.$noty.success("Image ajoutée avec succès."),this.files.unshift(n.newImageArray);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),onImageLoad:function(e){console.log("onImageLoad: ",e);var t=this.$refs.selectedImage;console.log("naturalWidth: ",t.naturalWidth),console.log("naturalHeight: ",t.naturalHeight),this.selectedImageWidth=t.naturalWidth,this.selectedImageHeight=t.naturalHeight},closeModal:function(){console.log("closeModal"),this.$emit("closeImagesModal",!1),this.$bvModal.hide("imagesModal")}}},f=(n(272),n(2)),p=Object(f.a)(m,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{size:"xl",title:"Gestion des images",id:"imagesModal","ok-disabled":"","no-close-on-esc":"","no-close-on-backdrop":""},on:{close:e.closeModal},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[n("div",{staticClass:"w-100"},[n("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"md"},on:{click:e.closeModal}},[e._v("\n                Fermer\n            ")])],1)]},proxy:!0}])},[e._v("\n    showSidebar: "+e._s(e.showSidebar)),n("br"),n("br"),e._v("\n    selectedFile: "+e._s(e.selectedFile)),n("br"),n("br"),e._v("\n    files: "+e._s(e.files)),n("br"),n("br"),e._v(" "),n("b-tabs",{attrs:{"content-class":"mt-3"}},[n("b-tab",{attrs:{title:"Gallerie d'images",active:""}},[n("b-sidebar",{attrs:{"aria-controls":"details",title:"Détails",shadow:""},scopedSlots:e._u([{key:"footer",fn:function(t){var r=t.hide;return[n("div",{staticClass:"d-flex bg-dark text-light justify-content-center align-items-center px-3 py-2"},[n("b-button",{attrs:{size:"sm"},on:{click:r}},[e._v("Fermer")])],1)]}}]),model:{value:e.showSidebar,callback:function(t){e.showSidebar=t},expression:"showSidebar"}},[e.selectedFile?n("div",{staticClass:"px-3 py-2"},[n("b-img",{ref:"selectedImage",staticClass:"mb-3",attrs:{src:"/images/"+e.selectedFile[0],fluid:"",thumbnail:""},on:{load:e.onImageLoad}}),e._v(" "),n("p",{staticClass:"text-white"},[e._v("\n                        Taille: "+e._s(e.selectedFile[2]/1e3)+" Ko"),n("br"),e._v("\n                        Dernière modification: "+e._s(e._f("moment")(e.selectedFile[3],"DD-MM-YYYY HH:mm"))),n("br"),e._v(" "),e._v("\n                        Largeur: "+e._s(e.selectedImageWidth)+" px"),n("br"),e._v("\n                        Hauteur: "+e._s(e.selectedImageHeight)+" px\n                    ")]),e._v(" "),n("div",{staticClass:"text-center"},[n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.insertFile(e.selectedFile[0])}}},[e._v("Insérer Image")])],1)],1):e._e()]),e._v(" "),n("b-row",{staticClass:"justify-content-center my-3"},e._l(e.files,function(t,r){return n("b-col",{key:r,attrs:{cols:"6",md:"3",lg:"2"},on:{click:function(n){return e.selectFile(t)}}},[n("b-img",{staticClass:"image",attrs:{thumbnail:"",fluid:"",src:"/images/"+t[0]}}),e._v(" "),n("p",{staticClass:"text-center",staticStyle:{"word-break":"break-word"}},[e._v(e._s(e.formatImageName(t[0])))])],1)}),1)],1),e._v(" "),n("b-tab",{attrs:{title:"Uploader une image"}},[n("b-row",{staticClass:"justify-content-center my-3"},[n("b-col",{attrs:{cols:"12",md:"6",lg:"4"}},[n("b-form-file",{class:{"is-invalid":e.form.errors.has("image")},attrs:{accept:".jpg, .png, .gif",placeholder:"Choisir un fichier...","drop-placeholder":"Placer le fichier ici..."},on:{change:e.onFileChange}}),e._v(" "),n("has-error",{attrs:{form:e.form,field:"image"}}),e._v(" "),n("div",{attrs:{id:"preview"}},[e.url?n("img",{attrs:{src:e.url}}):e._e()])],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-center my-3"},[n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.uploadImage(t)}}},[e._v("Uploader")])],1)],1)],1)],1)},[],!1,null,"857fddba",null);t.a=p.exports},272:function(e,t,n){"use strict";var r=n(38);n.n(r).a},273:function(e,t,n){(e.exports=n(7)(!1)).push([e.i,".image[data-v-857fddba]:hover {\n  cursor: pointer;\n  border: 2px solid #2C5CAD;\n}\n#preview[data-v-857fddba] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 1em;\n}\n#preview img[data-v-857fddba] {\n  max-width: 50%;\n  max-height: 200px;\n}",""])},274:function(e,t,n){"use strict";var r=n(39);n.n(r).a},275:function(e,t,n){(e.exports=n(7)(!1)).push([e.i,".image[data-v-778fc4d6]:hover {\n  cursor: pointer;\n  border: 2px solid #2C5CAD;\n}\n#preview[data-v-778fc4d6] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 1em;\n}\n#preview img[data-v-778fc4d6] {\n  max-width: 50%;\n  max-height: 200px;\n}\n.unselectable[data-v-778fc4d6] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}",""])},276:function(e,t,n){"use strict";var r=n(40);n.n(r).a},277:function(e,t,n){(e.exports=n(7)(!1)).push([e.i,"",""])},38:function(e,t,n){var r=n(273);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(8)(r,a);r.locals&&(e.exports=r.locals)},39:function(e,t,n){var r=n(275);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(8)(r,a);r.locals&&(e.exports=r.locals)},40:function(e,t,n){var r=n(277);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(8)(r,a);r.locals&&(e.exports=r.locals)}}]);